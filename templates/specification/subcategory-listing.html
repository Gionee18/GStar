<authentication></authentication>

<div class="row">
	<div class="col-lg-12">
		<!-- <ol class="breadcrumb">
			<li><a href="javascript:void(0);">Home</a></li>
			<li class="active"><span>Advanced tables</span></li>
		</ol> -->
		
		<h1 class="advn_tbl">Manage Specifications Sub-Categories</h1>


<div class="row"></div>

<div class="row">
	<div class="col-md-6">
		<pagination total-items="totalItems" max-size="maxSize" ng-model="currentPage" items-per-page="itemsPerPage" ng-change="pageChanged()"></pagination>

		<div class="shorting-block">
		<select ng-model="itemsPerPage" class="form-control">
			<option value="10">10</option>
			<option value="25">25</option>
			<option value="50">50</option>
			<option value="100">100</option>
		</select>
		</div>
	</div>
	
	
	<div class="col-md-6">
	<select class="form-control" ng-model="category_id" ng-change="filterList(category_id)" style="margin-top:5px; width:150px; position:relative; display:inline-block; float:left;">
			<option value="">All</option>
			<option ng-repeat="single in catlist" value="{{single.id}}">{{single.cat_name}}</option>
		</select>
	<span data-toggle="modal" data-target="#dnd_popup"  ng-if="userData.role <= 10" class="btn btn-primary pull-right" style="float:left !important; margin-left:5px; margin-top:6px; display:block;"><i class="fa fa-exchange fa-rotate-90"></i></span>
		<span style="width:150px; position: relative; border: 1px solid #ccc; display:inline; float: right; margin-left: 10px; margin-top:5px;">
	<!-- <input ng-model="search" type="text" ng-change="getSearchData()" placeholder="Search" class="form-control"> -->
	
	<my-tag src="'list/specification/subcategory'" callback="getUpdatedData(data)"></my-tag>
		<span style="position: absolute;top: 6px;right: 7px;z-index: 10; background: #fff; cursor: pointer; padding: 0 3px;">
			<a href="javascript:void(0);"><i class="fa fa-search"></i></a>
		</span>
	</span>	
<a data-toggle="modal" data-target="#add_new_cat" ng-if="userData.role < 15" class="btn btn-primary pull-right" style="margin-top:5px;"><i class="fa fa-plus-circle fa-lg"></i> Add New</a>
	</div>
</div>



</div>
</div>

<div class="row">
	<div class="col-lg-12">
		<div class="main-box clearfix">
			<!-- <header class="main-box-header clearfix">
				<h2>Table with JS pagination, search, ordering, export to pdf and lots more.</h2>
			</header> -->
			&nbsp;
			<div class="clearfix"></div>
			<div class="main-box-body clearfix">
			
				<div class="table-responsive" style="padding: 0 15px;">
					<table id="table-example" class="table table-hover user-list" >
						<thead>
							<tr>
								
								<th ng-click="sort('spec_catname')">Category Name<span class="glyphicon sort-icon" ng-show="sortKey=='spec_catname'" ng-class="{'glyphicon-chevron-up':!reverse,'glyphicon-chevron-down':reverse}"></th>
								<th ng-click="sort('subcat_name')">Sub-Category Name<span class="glyphicon sort-icon" ng-show="sortKey=='subcat_name'" ng-class="{'glyphicon-chevron-up':!reverse,'glyphicon-chevron-down':reverse}"></th>
								<th ng-click="sort('threshold')">threshold<span class="glyphicon sort-icon" ng-show="sortKey=='threshold'" ng-class="{'glyphicon-chevron-up':!reverse,'glyphicon-chevron-down':reverse}"></th>
								<!-- <th ng-click="sort('priority')">Priority<span class="glyphicon sort-icon" ng-show="sortKey=='priority'" ng-class="{'glyphicon-chevron-up':!reverse,'glyphicon-chevron-down':reverse}"></th> -->
								
								<th ng-click="sort('created_at')">Created On<span class="glyphicon sort-icon" ng-show="sortKey=='created_at'" ng-class="{'glyphicon-chevron-up':!reverse,'glyphicon-chevron-down':reverse}"></th>
								<th ng-click="sort('updated_at')">Updated On<span class="glyphicon sort-icon" ng-show="sortKey=='updated_at'" ng-class="{'glyphicon-chevron-up':!reverse,'glyphicon-chevron-down':reverse}"></th>
								<th ng-click="sort('status')" >Status<span class="glyphicon sort-icon" ng-show="sortKey=='status'" ng-class="{'glyphicon-chevron-up':!reverse,'glyphicon-chevron-down':reverse}"></th>
								
								<th class="text-center">Action</th>
							</tr>
						</thead>
						<tbody>
						
							<tr ng-repeat="x in list.slice(((currentPage-1)*itemsPerPage), ((currentPage)*itemsPerPage))|orderBy:sortKey:reverse">
								
								<td>{{x.spec_catname}}</td>
								<td>{{x.subcat_name}}</td>
								<td>{{x.threshold}}</td>
								<!-- <td>{{x.priority}}</td> -->
								
							
								
									<td>{{x.created_at | date:"dd/MM/yyyy"}}</td>
									<td>{{x.updated_at | date:"dd/MM/yyyy"}}</td>
										
								<td>
									<span  ng-class="x.status=='1' ? 'label label-success' : 'label label-danger'" >{{x.status|statusFilter}}</span>
								</td>
								<td class="text-center">	
									<a data-match-route="/specification/attribute-listing" href="#specification/attribute-listing/{{x.subcatid}}" class="table-link">
										<span class="fa-stack">
											<img src="assets/img/edit-and-view.png" width="25"  title="View Attribute" alt="Edit & View"/>
											<!--i class="fa fa-eye" title="view" aria-hidden="true"></i-->
										</span>
									</a>
									
									
									<a data-toggle="modal" data-target="#edit_new_cat"  ng-if="userData.role < 15" ng-click="editData(x.subcatid)" class="table-link" title="Edit">
										<span class="fa-stack">
											<i class="fa fa-square fa-stack-2x"></i>
											<i class="fa fa-pencil fa-stack-1x fa-inverse"></i>
										</span>
									</a>
						
							 	 <a href="javascript:void(0);" class="table-link danger" ng-if="userData.role < 15"  title="Delete" ng-click="deleteSubCat(x.subcatid)">
								
								 <span class="fa-stack" >
											<i class="fa fa-square fa-stack-2x"></i>
											<i class="fa fa-trash-o fa-stack-1x fa-inverse"></i>
										</span>
									</a> 
								</td>
							</tr>
								
						</tbody>
					</table>
					
				</div>
			</div>

		</div>
		<pagination total-items="totalItems" max-size="maxSize" items-per-page="itemsPerPage" ng-model="currentPage" ng-change="pageChanged()"></pagination>
	</div>
</div>

<div class="modal fade" id="add_new_cat" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
        <h4 class="modal-title" id="exampleModalLabel">Add Specifications Subcategory</h4>
      </div>
      <div class="modal-body">
      <div>
			<!-- Nav tabs -->
			    
						<form id="subcatForm" ng-submit="submitAddsubCat()">
						<div class="main-box-body editbx">
							<header class="main-box-header">
								<form style="margin-bottom: 3%;margin-top:3%;overflow:hidden;">
								<div class="row">
								
							<div class="col-sm-3"><label>Category<span class="required">*</span></label></div>
							<div class="col-sm-9" > 
							<select class="form-control"  ng-model="addsubCatData.spec_catid" ng-options="list.id as list.cat_name for list in catlist" required>
								<option value=""selected>Select</option>
							</select>
							</div>
								</div>
								<div class="row">
								<div class="col-sm-3"> 
								<label>Name<span class="red">*</span></label></div>
								<div class="col-sm-9" > 
								<input type="text"  class="form-control" ng-model="addsubCatData.name"  maxlength="50" name="" id="" required>
								</div>

								</div>
								
								<div class="row">
								
							<div class="col-sm-3"><label>Status<span class="required">*</span></label></div>
							<div class="col-sm-9" > 
							<select class="form-control"  ng-model="addsubCatData.status" ng-disabled="userData.id == usr_id" required>
								<option value=''>Select</option>
								<option value='1'>Active</option>
								<option value='0'>Inactive</option>
							</select>
							</div>
							
								</div>

								<div class="row">
								<div class="col-sm-3"> 
								<label>Threshold<span class="red">*</span></label></div>
								<div class="col-sm-9" > 
								<input type="number"  class="form-control"  min="0" max="9999" ng-model="addsubCatData.threshold" name="" id="" title="Please enter number only" required>
								</div>

								</div>
								<!-- <div class="row">
								<div class="col-sm-3"> <label>description<span class="red">*</span></label></div>
								<div class="col-sm-9" >
								<textarea class="form-control" rows="3" ng-model="addCatData.description" maxlength="240"  name="" id="" required></textarea>
								</div>
								</div> -->
								
								

								

								</form>
							</header>
							
						
							<button type="submit" class="btn btn-primary"> Save</button>
							<button type="button" id="cancel" ng-click="closeForm()" class="btn btn-default cancel" data-dismiss="modal">Close</button>
						</div>
						</form>
				
			</div> <!-- Add radio button tab start here -->
      </div>
 </div>
  </div>
</div>
		
<!--edit-->
<div class="modal fade" id="edit_new_cat" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel">
   <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
        <h4 class="modal-title" id="exampleModalLabel">Edit Specifications Subcategory</h4>
      </div>
      <div class="modal-body">
      <div>
			<!-- Nav tabs -->
			    
						<form ng-submit="submitEditsubCat()">
						<div class="main-box-body editbx">
							<header class="main-box-header">
								<form style="margin-bottom: 3%;margin-top:3%;overflow:hidden;">
								<div class="row">
								<div class="col-sm-3"> 
								<label>Name<span class="red">*</span></label></div>
								<div class="col-sm-9" > 
								<input type="text"  class="form-control" ng-model="editsubCatData.name"  maxlength="50" name="" id="" required>
								</div>

								</div>
								
								<div class="row">
								
							<div class="col-sm-3"><label>Category<span class="required">*</span></label></div>
							<div class="col-sm-9" > 
							<select class="form-control"  ng-model="editsubCatData.spec_catid" ng-options="list.id as list.cat_name for list in catlist" required>
								<option value=""selected>Select</option>
							</select>
							</div>
								</div>
								
								
								<div class="row">
								
							<div class="col-sm-3"><label>Status<span class="required">*</span></label></div>
							<div class="col-sm-9" > 
							<select class="form-control"  ng-model="editsubCatData.status" ng-disabled="userData.id == usr_id" required>
								<option value=''>Select</option>
								<option value='1'>Active</option>
								<option value='0'>Inactive</option>
							</select>
							</div>
							
								</div>

								<div class="row">
								<div class="col-sm-3"> 
								<label>Threshold<span class="red">*</span></label></div>
								<div class="col-sm-9" > 
								<input type="number"  class="form-control"  ng-model="editsubCatData.threshold" min="0" max="9999" title="Please enter number only"  name="" id="" required>
								</div>

								</div>
								<!-- <div class="row">
								<div class="col-sm-3"> <label>description<span class="red">*</span></label></div>
								<div class="col-sm-9" >
								<textarea class="form-control" rows="3" ng-model="addCatData.description" maxlength="240"  name="" id="" required></textarea>
								</div>
								</div> -->
								
								

								

								</form>
							</header>
							
						
							<button type="submit" class="btn btn-primary"> Save</button>
							<button type="button" id="cancel1" class="btn btn-default cancel" data-dismiss="modal">Close</button>
						</div>
						</form>
				
			</div> <!-- Add radio button tab start here -->
      </div>
 </div>
  </div>
</div>
		
<!-- Drag n Drop Model -->
<div class="modal fade" id="dnd_popup" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
        <h4 class="modal-title" id="exampleModalLabel">Ordering Product</h4>
      </div>
      <div class="modal-body">
        <!--  tab start here -->
			<div class="simpleDemo">
			    <!-- add from library end here -->			
				<form>
				<ul dnd-list="orderList">
					<li ng-repeat="item in orderList" dnd-draggable="item" dnd-moved="orderList.splice($index, 1)" dnd-effect-allowed="move"
					dnd-selected="models.selected = item" ng-class="{'selected': models.selected === item}">
						<div class="row"><div class="col-sm-1">{{$index + 1}}</div><div class="col-sm-11">{{item.subcat_name}}</div></div>
					</li>
				</ul>
				</form>
			</div> <!--  tab end here -->
      </div>
      <div class="modal-footer">
		<button type="button" ng-click="setOrder()" class="btn btn-primary" data-dismiss="modal">Save</button>
		<button type="button" class="btn btn-default cancel" data-dismiss="modal">Close</button>
	  </div>
    </div>
  </div>
</div>


<div class="modal fade" id="dnd_popup" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
        <h4 class="modal-title" id="exampleModalLabel">Ordering Topics</h4>
      </div>
      <div class="modal-body">
        <!--  tab start here -->
			<div class="simpleDemo">
			    <!-- add from library end here -->			
				<form>
				<ul dnd-list="orderList">
					<li ng-repeat="item in orderList" dnd-draggable="item" dnd-moved="orderList.splice($index, 1)" dnd-effect-allowed="move"
					dnd-selected="models.selected = item" ng-class="{'selected': models.selected === item}">
						<div class="row"><div class="col-sm-1">{{$index + 1}}</div><div class="col-sm-11">{{item.subcat_name}}</div></div>
					</li>
				</ul>
				</form>
			</div> <!--  tab end here -->
      </div>
      <div class="modal-footer">
		<button type="button" ng-click="setOrder()" class="btn btn-primary" data-dismiss="modal">Save</button>
		<button type="button" class="btn btn-default cancel" data-dismiss="modal">Close</button>
	  </div>
    </div>
  </div>
</div>		
